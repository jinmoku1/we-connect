<%- include ../partials/header.ejs %>

<div style="width: 560px; margin:auto;">
	<h1><%=title%></h1>

	<form id="signupForm" class="form-horizontal" method="post">
		<input type="hidden" name="userType" value="<%=userType%>" />
		<div class="form-group">
			<label class="col-sm-3 control-label" for="netId">Net ID</label>
			<div class="col-sm-9">
				<input type="text" name="netId" id="netId" placeholder="Net ID" class="form-control" required />
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label" for="password">Password</label>
			<div class="col-sm-9">
				<input type="password" name="password" id="password" placeholder="Password" class="form-control" required />
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label" for="confirm">Confirm</label>
			<div class="col-sm-9">
				<input type="password" id="confirm" name="confirm" placeholder="Password Confirm" class="form-control" required />
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label" for="firstName">First Name</label>
			<div class="col-sm-9">
				<input type="text" id="firstName" placeholder="First Name" name="firstName" class="form-control" required />
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label" for="lastName">Last Name</label>
			<div class="col-sm-9">
				<input type="text" id="lastName" placeholder="Last Name" name="lastName" class="form-control" required />
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Department</label>
			<div class="col-sm-9">
				<select id="department" class="form-control" name="department" required>
				<% for (var i in departments) { %>
					<option value="<%=departments[i]%>"><%=departments[i]%></option>
				<% } %>
				</select>
			</div>
		</div>
		<div class="form-group">
			<label class="col-sm-3 control-label">Interests</label>
			<div class="col-sm-9">
			<% for (var i in interests) { %>
				<div class="checkbox col-sm-6">
					<label>
						<input type="checkbox" name="interests" value="<%=interests[i]%>" />
						<%=interests[i]%>
					</label>
				</div>
			<% } %>
			</div>
		</div>
		<% if (userType == userConst.TYPE_STUDENT) { %>
			<div class="form-group">
				<label class="col-sm-3 control-label">Degree</label>
				<div class="col-sm-9">
					<select id="degree" class="form-control" name="degree" required>
					<% for (var i in degrees) { %>
						<option value="<%=degrees[i]%>"><%=degrees[i]%></option>
					<% } %>
				</select>
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-3 control-label">Standing</label>
				<div class="col-sm-9">
					<select id="classStanding" class="form-control" name="classStanding" required>
					<% for (var i in classStandings) { %>
						<option value="<%=classStandings[i]%>"><%=classStandings[i]%></option>
					<% } %>
					</select>
				</div>
			</div>
		<% } else if (userType == userConst.TYPE_FACULTY) { %>
			<div class="form-group">
				<label class="col-sm-3 control-label" for="websiteUrl">Website</label>
				<div class="col-sm-9">
					<input type="url" id="websiteUrl" name="websiteUrl" class="form-control" />
				</div>
			</div>
		<% } %>
		<div class="form-group">
			<div class="col-sm-offset-3 col-sm-9">
				<button type="submit" class="btn btn-primary">Sign Up</button>
			</div>
		</div>
	</form>
</div>

<script>

jQuery.validator.addMethod("isValidNetId", 
	function(value, element) {
    	return /\b[a-zA-Z]+[0-9]+\b/.test(value);
    },
    jQuery.validator.format("Please enter a valid netID.")
);

jQuery.validator.addMethod("isValidName", 
	function(value, element) {
    	return /\b[a-zA-Z]+\b/.test(value);
    },
    jQuery.validator.format("Only alphabets are allowed for names.")
);
		
$('#signupForm').validate({
	rules: {
		netId:{
			isValidNetId: true,
			remote: {
				url: "/account/register/validate",
				type: "post",
				data: {
					netId: "#netId"
				},
				success: function(data) {
					alert(data);
					if (data == "1"){
						return true;
					}
					else {
						jQuery.validator.format("{0} is already taken.")
						return false;
					}
				}
			}
		},
		password: {
			minlength: 8,
			maxlength: 20
		},
		firstName: {
			isValidName: true
		},
		lastName: {
			isValidName: true
		},
		confirm: {
			equalTo: "#password"
		}
	},
	
	errorClass: "validate-error",
	messages: {
		
	}
});
</script>

<%- include ../partials/footer.ejs %>